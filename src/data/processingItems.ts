import type { ProcessingItem, ServiceType } from '@/types';

export const processingItems: ProcessingItem[] = [
  // ===== 기본 모드 (추천 기본 노출) =====
  {
    id: 'account_signup',
    name: '회원가입(이메일)',
    description: '이메일 기반 회원가입 및 계정 생성',
    icon: 'User',
    category: 'basic',
    isRecommended: true,
    isRequired: true,
    needsLegalNotice: false,
    tooltip: '이메일, 비밀번호, 닉네임 등 기본 회원정보를 수집합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '회원 가입 및 관리, 본인 확인, 서비스 이용에 따른 본인 식별',
    exampleItems: ['이메일', '비밀번호', '닉네임', '이름'],
  },
  {
    id: 'auth_session',
    name: '로그인/인증(세션/JWT)',
    description: '세션 관리 및 자동 로그인 유지',
    icon: 'Key',
    category: 'basic',
    isRecommended: true,
    isRequired: true,
    needsLegalNotice: false,
    tooltip: '로그인 세션, 리프레시 토큰, 자동 로그인 정보를 관리합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '로그인 상태 유지, 자동 로그인, 보안 인증',
    exampleItems: ['세션ID', '리프레시토큰', '기기정보', 'IP주소'],
  },
  {
    id: 'payment_onetime',
    name: '결제(단건)',
    description: '일회성 결제 처리 및 영수증 발행',
    icon: 'CreditCard',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '신용카드, 계좌이체 등 단건 결제 정보를 처리합니다.',
    defaultRetention: '5years',
    defaultPurpose: '상품 및 서비스 구매, 결제 처리, 영수증 발행',
    exampleItems: ['카드번호(마스킹)', '결제금액', '결제일시', '거래ID'],
  },
  {
    id: 'payment_subscription',
    name: '구독(자동결제)',
    description: '정기 결제 및 구독 관리',
    icon: 'Repeat',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '월/년 구독 자동결제 및 결제 예약 정보를 관리합니다.',
    defaultRetention: '5years',
    defaultPurpose: '구독 서비스 제공, 정기 결제 처리, 구독 상태 관리',
    exampleItems: ['구독플랜', '결제주기', '다음결제일', '청구정보'],
  },
  {
    id: 'marketing_email',
    name: '마케팅(이메일)',
    description: '이메일 뉴스레터 및 프로모션 발송',
    icon: 'Mail',
    category: 'basic',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: true,
    tooltip: '이메일 마케팅 발송을 위한 정보입니다. 별도 동의가 필요합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '신규 서비스 홍보, 이벤트 안내, 뉴스레터 발송',
    exampleItems: ['이메일', '수신동의일', '관심카테고리'],
  },
  {
    id: 'marketing_push',
    name: '마케팅(푸시)',
    description: '앱 푸시 알림 및 웹 푸시 발송',
    icon: 'Bell',
    category: 'basic',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: true,
    tooltip: '푸시 알림 발송을 위한 토큰 정보입니다. 별도 동의가 필요합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '프로모션 알림, 이벤트 알림, 맞춤형 메시지 발송',
    exampleItems: ['푸시토큰', '기기타입', '수신동의일'],
  },
  {
    id: 'support_inquiry',
    name: '고객센터/문의',
    description: '1:1 문의 응대 및 고객 지원',
    icon: 'Headphones',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '고객 문의 내역 및 응대 기록을 관리합니다.',
    defaultRetention: '3years',
    defaultPurpose: '고객 문의 응대, 민원 처리, 서비스 품질 개선',
    exampleItems: ['문의내용', '첨부파일', '연락처', '처리결과'],
  },
  {
    id: 'analytics_cookie',
    name: '분석/로그(쿠키/접속기록)',
    description: '서비스 이용 분석 및 성능 개선',
    icon: 'BarChart3',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: true,
    tooltip: '쿠키 및 접속 로그를 통한 서비스 분석이 포함됩니다. 쿠키 동의 배너가 필요합니다.',
    defaultRetention: '1year',
    defaultPurpose: '서비스 이용 통계 분석, 사용자 경험 개선, 오류 모니터링',
    exampleItems: ['쿠키', '접속IP', '브라우저정보', '이용기록'],
  },
  {
    id: 'auth_social',
    name: '소셜 로그인',
    description: '카카오/네이버/구글 등 소셜 계정 연동',
    icon: 'Share2',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '소셜 로그인 연동 시 제공받는 정보를 처리합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '소셜 로그인 인증, 간편 가입, 계정 연동 관리',
    exampleItems: ['소셜ID', '프로필이미지', '이메일', '이름'],
  },
  {
    id: 'payment_refund',
    name: '환불/분쟁 처리',
    description: '환불 요청 처리 및 분쟁 조정',
    icon: 'Undo2',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '환불 처리 및 분쟁 해결을 위한 정보를 관리합니다.',
    defaultRetention: '3years',
    defaultPurpose: '환불 처리, 분쟁 조정, 소비자 보호',
    exampleItems: ['환불사유', '계좌정보', '분쟁내역', '처리결과'],
  },
  {
    id: 'account_dormant',
    name: '휴계정(비활성 관리)',
    description: '장기 미접속 계정 관리 및 휴계 전환',
    icon: 'Moon',
    category: 'basic',
    isRecommended: true,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '1년 이상 미접속 계정의 휴계 처리 및 별도 관리를 위한 정보입니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '휴계정 관리, 개인정보 보호, 법정 의무 이행',
    exampleItems: ['최종접속일', '휴계전환일', '계정상태'],
  },

  // ===== 고급 모드 (추가 노출) =====
  {
    id: 'auth_phone',
    name: '휴전화 본인인증',
    description: '연령확인/중복가입방지/실명인증',
    icon: 'Smartphone',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: true,
    tooltip: '휴전화 본인인증 시 수집되는 정보입니다. 별도 동의가 필요합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '연령 확인, 중복 가입 방지, 실명 인증',
    exampleItems: ['휴전번호', 'CI', 'DI', '생년월일', '성별'],
  },
  {
    id: 'delivery_shipping',
    name: '배송/물류',
    description: '상품 배송 및 운송장 관리',
    icon: 'Truck',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '상품 배송을 위한 수취인 정보를 처리합니다.',
    defaultRetention: '3months',
    defaultPurpose: '상품 배송, 운송장 조회, 배송 상태 알림',
    exampleItems: ['수취인명', '배송주소', '연락처', '운송장번호'],
  },
  {
    id: 'location_gps',
    name: '위치기반 서비스',
    description: 'GPS 기반 위치 정보 수집',
    icon: 'MapPin',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: true,
    tooltip: '위치기반서비스 이용약관 및 위치정보 수집 동의가 별도로 필요합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '위치 기반 서비스 제공, 주변 정보 검색, 지역 맞춤 기능',
    exampleItems: ['GPS좌표', '주소', '지역코드', '위치기록'],
  },
  {
    id: 'community_content',
    name: '커뮤니티/게시물 업로드',
    description: '사진/댓글/신고 등 사용자 생성 콘텐츠',
    icon: 'MessageSquare',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '커뮤니티 기능에서 생성되는 콘텐츠와 프로필 정보를 처리합니다.',
    defaultRetention: 'withdrawal',
    defaultPurpose: '커뮤니티 서비스 제공, 콘텐츠 관리, 신고 처리',
    exampleItems: ['게시글', '댓글', '이미지', '신고내역'],
  },
  {
    id: 'marketing_adpixel',
    name: '광고/리타게팅 픽셀',
    description: '맞춤형 광고 및 리타게팅',
    icon: 'Target',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: true,
    tooltip: 'Facebook Pixel, Google Ads 등 광고 픽셀 사용 시 별도 동의가 필요합니다.',
    defaultRetention: '1year',
    defaultPurpose: '맞춤형 광고 제공, 광고 효과 측정, 리타게팅',
    exampleItems: ['광고식별자', '전환정보', '관심분야'],
  },
  {
    id: 'event_promotion',
    name: '이벤트/경품 응모',
    description: '프로모션 이벤트 및 경품 추첨',
    icon: 'Gift',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '이벤트 응모 및 경품 배송을 위한 정보를 수집합니다.',
    defaultRetention: '1year',
    defaultPurpose: '이벤트 응모 처리, 경품 배송, 당첨자 관리',
    exampleItems: ['응모정보', '배송주소', '당첨여부'],
  },
  {
    id: 'survey_feedback',
    name: '설문조사/피드백 수집',
    description: '날부/외부 설문툴을 통한 피드백',
    icon: 'ClipboardList',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: 'Typeform, Google Forms 등 외부 설문툴 연동 시 수집되는 정보입니다.',
    defaultRetention: '1year',
    defaultPurpose: '서비스 개선, 고객 만족도 조사, 의견 수렴',
    exampleItems: ['설문응답', '피드백내용', '참여일시'],
  },
  {
    id: 'admin_operator',
    name: '관리자/운영자 계정',
    description: '날부 관리자 권한 및 접속 기록',
    icon: 'Shield',
    category: 'advanced',
    isRecommended: false,
    isRequired: false,
    needsLegalNotice: false,
    tooltip: '날부 직원 및 관리자의 정보 처리와 접속 로그가 포함됩니다.',
    defaultRetention: '3years',
    defaultPurpose: '날부 업무 처리, 접근 권한 관리, 보안 감사',
    exampleItems: ['사원번호', '부서', '직책', '접속로그'],
  },
];

export const getDefaultItemsForServiceType = (serviceType: ServiceType): string[] => {
  const defaults: Record<ServiceType, string[]> = {
    saas: ['account_signup', 'auth_session', 'payment_onetime', 'payment_subscription', 'support_inquiry', 'analytics_cookie'],
    commerce: ['account_signup', 'auth_session', 'payment_onetime', 'payment_subscription', 'payment_refund', 'support_inquiry', 'analytics_cookie'],
    community: ['account_signup', 'auth_session', 'community_content', 'support_inquiry', 'analytics_cookie'],
    app: ['account_signup', 'auth_session', 'payment_onetime', 'auth_social', 'marketing_push', 'analytics_cookie'],
    offline: ['account_signup', 'auth_session', 'payment_onetime', 'marketing_email', 'support_inquiry'],
  };
  return defaults[serviceType] || ['account_signup', 'support_inquiry'];
};

export const getItemsByCategory = (category: 'basic' | 'advanced') => {
  return processingItems.filter(item => item.category === category);
};

export const getItemById = (id: string) => {
  return processingItems.find(item => item.id === id);
};
